{"ast":null,"code":"import axios from 'axios';\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000';\n\n// Create axios instance\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Request interceptor\napi.interceptors.request.use(config => {\n  var _config$method;\n  console.log(`API Request: ${(_config$method = config.method) === null || _config$method === void 0 ? void 0 : _config$method.toUpperCase()} ${config.url}`);\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// Response interceptor\napi.interceptors.response.use(response => {\n  console.log(`API Response: ${response.status} ${response.config.url}`);\n  return response;\n}, error => {\n  var _error$response, _error$config, _error$response2;\n  console.error(`API Error: ${(_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status} ${(_error$config = error.config) === null || _error$config === void 0 ? void 0 : _error$config.url}`, (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data);\n  return Promise.reject(error);\n});\n\n// Hydro Units API\nexport const hydroUnitsAPI = {\n  // Get sensor data for a unit\n  getSensors: unitId => api.get(`/units/${unitId}/sensors`),\n  // Get relay states for a unit\n  getRelays: unitId => api.get(`/units/${unitId}/relays`),\n  // Update relay state\n  updateRelay: (unitId, relayData) => api.post(`/units/${unitId}/relay`, relayData),\n  // Get schedule for a unit\n  getSchedule: unitId => api.get(`/units/${unitId}/schedule`),\n  // Update schedule for a unit\n  updateSchedule: (unitId, scheduleData) => api.post(`/units/${unitId}/schedule`, scheduleData),\n  // Update control mode for a specific relay (manual/timer)\n  updateControlMode: (unitId, relay, mode) => api.post(`/units/${unitId}/control_mode`, {\n    relay,\n    mode\n  })\n};\n\n// Room Monitoring API\nexport const roomAPI = {\n  // Get front room sensors\n  getFrontSensors: () => api.get('/room/front/sensors'),\n  // Get back room sensors\n  getBackSensors: () => api.get('/room/back/sensors'),\n  // Get AC schedule\n  getACSchedule: () => api.get('/room/back/ac_schedule'),\n  // Update AC schedule\n  updateACSchedule: scheduleData => api.post('/room/back/ac_schedule', scheduleData)\n};\n\n// Camera API\nexport const cameraAPI = {\n  // Get camera status for a unit\n  getCameras: unitId => api.get(`/cameras/${unitId}`),\n  // Get recent images from a specific camera\n  getCameraImages: (cameraId, limit = 10) => api.get(`/cameras/${cameraId}/images?limit=${limit}`),\n  // Upload camera image\n  uploadImage: (cameraId, imageFile) => {\n    const formData = new FormData();\n    formData.append('image', imageFile);\n    return api.post(`/cameras/${cameraId}/upload`, formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n  },\n  // Get latest images for a unit\n  getLatestImages: unitId => api.get(`/units/${unitId}/cameras/latest`)\n};\n\n// Utility functions\nexport const apiUtils = {\n  // Handle API errors\n  handleError: (error, defaultMessage = 'An error occurred') => {\n    var _error$response3, _error$response3$data;\n    if ((_error$response3 = error.response) !== null && _error$response3 !== void 0 && (_error$response3$data = _error$response3.data) !== null && _error$response3$data !== void 0 && _error$response3$data.message) {\n      return error.response.data.message;\n    }\n    if (error.message) {\n      return error.message;\n    }\n    return defaultMessage;\n  },\n  // Check if API is available\n  healthCheck: async () => {\n    try {\n      await api.get('/health');\n      return true;\n    } catch (error) {\n      return false;\n    }\n  }\n};\nexport default api;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","api","create","baseURL","headers","interceptors","request","use","config","_config$method","console","log","method","toUpperCase","url","error","Promise","reject","response","status","_error$response","_error$config","_error$response2","data","hydroUnitsAPI","getSensors","unitId","get","getRelays","updateRelay","relayData","post","getSchedule","updateSchedule","scheduleData","updateControlMode","relay","mode","roomAPI","getFrontSensors","getBackSensors","getACSchedule","updateACSchedule","cameraAPI","getCameras","getCameraImages","cameraId","limit","uploadImage","imageFile","formData","FormData","append","getLatestImages","apiUtils","handleError","defaultMessage","_error$response3","_error$response3$data","message","healthCheck"],"sources":["C:/Users/saira/OneDrive/Desktop/dashboard/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000';\n\n// Create axios instance\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Request interceptor\napi.interceptors.request.use(\n  (config) => {\n    console.log(`API Request: ${config.method?.toUpperCase()} ${config.url}`);\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Response interceptor\napi.interceptors.response.use(\n  (response) => {\n    console.log(`API Response: ${response.status} ${response.config.url}`);\n    return response;\n  },\n  (error) => {\n    console.error(`API Error: ${error.response?.status} ${error.config?.url}`, error.response?.data);\n    return Promise.reject(error);\n  }\n);\n\n// Hydro Units API\nexport const hydroUnitsAPI = {\n  // Get sensor data for a unit\n  getSensors: (unitId) => api.get(`/units/${unitId}/sensors`),\n\n  // Get relay states for a unit\n  getRelays: (unitId) => api.get(`/units/${unitId}/relays`),\n\n  // Update relay state\n  updateRelay: (unitId, relayData) => api.post(`/units/${unitId}/relay`, relayData),\n\n  // Get schedule for a unit\n  getSchedule: (unitId) => api.get(`/units/${unitId}/schedule`),\n\n  // Update schedule for a unit\n  updateSchedule: (unitId, scheduleData) => api.post(`/units/${unitId}/schedule`, scheduleData),\n\n  // Update control mode for a specific relay (manual/timer)\n  updateControlMode: (unitId, relay, mode) => api.post(`/units/${unitId}/control_mode`, { relay, mode }),\n};\n\n// Room Monitoring API\nexport const roomAPI = {\n  // Get front room sensors\n  getFrontSensors: () => api.get('/room/front/sensors'),\n\n  // Get back room sensors\n  getBackSensors: () => api.get('/room/back/sensors'),\n\n  // Get AC schedule\n  getACSchedule: () => api.get('/room/back/ac_schedule'),\n\n  // Update AC schedule\n  updateACSchedule: (scheduleData) => api.post('/room/back/ac_schedule', scheduleData),\n};\n\n// Camera API\nexport const cameraAPI = {\n  // Get camera status for a unit\n  getCameras: (unitId) => api.get(`/cameras/${unitId}`),\n\n  // Get recent images from a specific camera\n  getCameraImages: (cameraId, limit = 10) => api.get(`/cameras/${cameraId}/images?limit=${limit}`),\n\n  // Upload camera image\n  uploadImage: (cameraId, imageFile) => {\n    const formData = new FormData();\n    formData.append('image', imageFile);\n    return api.post(`/cameras/${cameraId}/upload`, formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n      },\n    });\n  },\n\n  // Get latest images for a unit\n  getLatestImages: (unitId) => api.get(`/units/${unitId}/cameras/latest`),\n};\n\n// Utility functions\nexport const apiUtils = {\n  // Handle API errors\n  handleError: (error, defaultMessage = 'An error occurred') => {\n    if (error.response?.data?.message) {\n      return error.response.data.message;\n    }\n    if (error.message) {\n      return error.message;\n    }\n    return defaultMessage;\n  },\n\n  // Check if API is available\n  healthCheck: async () => {\n    try {\n      await api.get('/health');\n      return true;\n    } catch (error) {\n      return false;\n    }\n  },\n};\n\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}